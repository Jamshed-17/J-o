#БазыДанных #Конспект #Программирование #ТРиЗБД #SQL 
### WHERE
 
Использование в операторе SELECT предложения, определяемого ключевым словом **WHERE** (где), позволяет задавать выражение условия (предикат), принимающее значение истина или ложь для значений полей строк таблиц, к которым обращается оператор SELECT.

В задаваемых в предложении WHERE условиях могут использоваться операции сравнения, определяемые операторами :

  = (равно), >(больше), < (меньше),
  >= (больше или равно), <= (меньше или равно), <> (не равно),
  AND, OR,  NOT.


Синтаксис запроса с уточнением

```sql
SELECT <поля> FROM <таблица> WHERE <Условие_выборки>
```

Пример 7. Выбрать студентов 3 группы.
```sql
SELECT  *  FROM  ДАННЫЕ  WHERE  КОД_ГРУППЫ=3
```

Пример 8. Вывести родителей, работающих водителями и поварами.
```sql
SELECT  ФИО_РОД  FROM  РОДИТЕЛИ   WHERE ЖНОСТЬ=’ВОДИТЕЛЬ’ OR  ДОЛЖНОСТЬ=’ПОВАР’
```
 

Задание 5. Выполните следующий запрос:
Вывести название региона с кодом 1.

```SQL
SELECT НАЗВАНИЕ FROM РЕГИОНЫ WHERE КОД_РЕГИОНА=1
```


### GROUP BY

Оператор GROUP BY (группировать по) служит для группировки записей по значениям одного или нескольких столбцов. Он собирает записи в группы и упорядочивает группы по алфавиту (точнее по ASCII- кодам символов).

Синтаксис запроса
```sql
 SELECT <поля> FROM <таблица> GROUP BY <Список_полей_группы>
```

Пример 9. Вывести родителей студентов сгруппированных по месту работы.
```sql
SELECT РАБОТА, ФИО_РОД FROM РОДИТЕЛИ GROUP BY РАБОТА
```

Задание 6. Выполните следующий запрос:

Вывести студентов сгруппированных по группам.
```sql
SELECT ФИО FROM СТУДЕНТЫ GROUP BY ГРУППА
```


### HAVING

Оператор HAVING (имеющие, при условии) обычно применяются совместно с оператором группировки  GROUP BY и задает фильтр записей в группах

Синтаксис запроса
```sql
 SELECT <поля> FROM <таблица>GROUP BY <Список_полей_группы>HAVING <Условие>
```

Пример 10. Вывести родителей студентов сгруппированных по месту работы, если они водители или учителя.
```sql
SELECT RABOTA, FIO_ROD FROM RODITELI GROUP BY RABOTA HAVING (RABOTA=‘ВОДИТЕЛЬ’) OR (RABOTA=’УЧИТЕЛЬ’)
```


 **При задании логического условия в предложении WHERE могут быть использованы операторы IN, BETWEEN, LIKE, IS NULL.**


Пример 11. Вывести родителей, работающих водителями и
  поварами.
```sql
SELECT  FIO_ROD  FROM  RODITELI   WHERE  RABOTA  IN (‘ВОДИТЕЛЬ’,  ’ПОВАР’)
```

Пример 12. Вывести всех родителей, кроме  работающих учителями и врачами.
```sql
SELECT  FIO_ROD  FROM  RODITELI   WHERE  RABOTA  NOT IN (‘УЧИТЕЛЬ’,  ’ВРАЧ’)
```


### BETWEEN

 Оператор BETWEEN используется для проверки условия вхождения значения поля в заданный интервал, то есть вместо списка значений атрибута этот оператор задает границы его изменения. 
 
 Пример 13. Вывести информацию о родителях с кодом от 2 до 9:
```sql
SELECT * FROM RODITELI   WHERE  KOD_RODITEL  BETWEEN 2 AND 9;
```

Оператор BETWEEN может использоваться как для числовых, так и для символьных типов полей.

Пример 14.  Вывести фамилии родителей, заглавные буквы которых находятся в диапозоне от А до И.
```sql
SELECT * FROM  RODITELI   WHERE FAM  BETWEEN ‘А’ AND ‘И’;
```



Оператор LIKE (поиск значений, удовлетворяющих образцу) просматривает строковые значения полей с целью определения, входит ли заданная в операторе LIKE подстрока (образец поиска) в символьную строку-значение проверяемого поля.

 Для выборки строковых значений по заданному образцу подстроки можно применять шаблон искомого образца строки, использующий следующие символы:

• символ подчеркивания « _ », указанный в шаблоне, определяет возможность наличия в указанном месте одного любого символа;
• символ « * » допускает присутствие в указанном месте проверяемой строки последовательности любых символов произвольной длины.

Пример 15. Выбрать сведения о родителях, фамилии которых начинаются на букву «П».
```sql
SELECT * FROM  RODITELI   WHERE FAM   LIKE  'П*'
```

Оператор IS NULL выводит строки, содержащие значение NULL в проверяемом поле.

Пример 16. Выбрать записи, содержащие пустые значения в данных о работе родителей.
```sql
SELECT * FROM  RODITELI   WHERE  RABOTA   IS NULL;
```

   Для сортировки  в SQL существует ключевое слово ORDER BY, после которого указывается имя столбца, по которому будет происходить сортировка. Команда имеет следующий синтаксис:

```sql
SELECT <поля> FROM <таблица> ORDER BY <поле>
```

   После ORDER BY <поле> можно указать направление сортировки. По умолчанию записи сортируются по возрастанию (ASC), ключевое слово DESC  задает сортировку в порядке, обратном алфавитному.

Пример 17. Отсортировать фамилии родителей в алфавитном порядке.
```sql
SELECT FIO_ROD  FROM  RODITELI  ORDER  BY  FIO_ROD
```

Пример 18. Отсортировать место работы  родителей в порядке, обратном алфавитному.
```sql
SELECT  RABOTA  FROM  RODITELI  ORDER  BY  RABOTA   DESC
```

Сортировку можно производить сразу по нескольким столбцам.

Пример 19. Отсортировать место работы  родителей в  алфавитном порядке, а фамилии в порядке, обратном алфавитному.
```sql
SELECT  FIO_ROD ,  RABOTA  FROM  RODITELI  ORDER  BY FIO_ROD, FIO_ROD DESC;
```


### Задание для самостоятельного выполнения №2.

1. Вывести фамилию преподавателя с кодом 2.
```sql
SELECT Фамилия FROM Преподаватели WHERE Код = 2;
```

2. Вывести информацию о студентах, обучающихся в группах с кодами 1 и 2.
```sql
SELECT * FROM Студенты WHERE Код_Группы IN (1, 2);
```

3. Вывести данные о студентах, фамилии которых начинаются на букву «М».
```sql
SELECT * FROM Студенты WHERE Фамилия LIKE 'М%';
```

4. Выбрать записи, содержащие пустые значения о номере квартиры студентов (проживающих в доме).
```sql
SELECT * FROM Студенты WHERE Номер_Квартиры IS NULL;
```

5. Отсортировать фамилии студентов в алфавитном порядке.
```sql
SELECT * FROM Студенты ORDER BY Фамилия;
```

6. Вывести данные о студентах, отсортировав номера телефонов по возрастанию.
```sql
SELECT * FROM Студенты ORDER BY Номер_Телефона ASC;
```

7. Выбрать студентов, фамилии которых заканчиваются на «а».
```sql
SELECT * FROM Студенты WHERE Фамилия LIKE '%а';
```

8. Отсортировать в порядке возрастания фамилии студентов, обучающихся в группе 3.
```sql
SELECT * FROM Студенты WHERE Код_Группы = 3 ORDER BY Фамилия ASC;
```

9. Вывести студентов, родившихся в 1990 году.
```sql
SELECT * FROM Студенты WHERE YEAR(Дата_Рождения) = 1990;
```

10. Вывести данные о студентах с фамилиями «Петров», «Смелов».
```sql
SELECT * FROM Студенты WHERE Фамилия IN ('Петров', 'Смелов');
```

11. Вывести в порядке, обратном алфавитному, все имена и фамилии студентов, родившихся не в 1991 году.
```sql
SELECT * FROM Студенты WHERE YEAR(Дата_Рождения) != 1991 ORDER BY Фамилия DESC;
```

12. Вывести информацию о всех студентах, кроме Варечкина и Климовой.
```sql
SELECT * FROM Студенты WHERE Фамилия NOT IN ('Варечкин', 'Климова');
```

13. Выбрать студентов, у которых номера телефонов связи МТС и начинаются с 3.
```sql
SELECT * FROM Студенты WHERE Номер_Телефона LIKE '3%' AND Оператор_Телефона = 'МТС';
```

14. Сгруппировать данные о студентах по дате рождения.
```sql
SELECT * FROM Студенты GROUP BY Дата_Рождения;
```

15. Сгруппировать по улицам данные о студентах, обучающихся в группе с кодом 1.
```sql
SELECT * FROM Студенты WHERE Код_Группы = 1 GROUP BY Улица;
```

